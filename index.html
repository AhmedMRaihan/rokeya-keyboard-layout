<!DOCTYPE HTML>

<html>
	<!--
		Rokeya Bangla Keyboard Layout
		This HTML has been generated automatically by PHP, See http://bdhacker.wordpress.com for Documentations
	-->
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="description" content="Rokeya Bangla Keyboard Layout" />
	<meta name="keywords" content="rokeya, rokeya keyboard, rokeya keyboard layout, rokeya phonetic, rokeya phonetic layout, rokeya bangla keyboard, rokeya bangla writing software, rokeya bangla typing layout" />
	<title>রোকেয়া কীবোর্ড লে-আউট | জাভাস্ক্রিপ্ট লাইব্রেরী টেস্ট পেইজ</title>
		<style type="text/css">
			input {width: 140px; margin-right: 5px; padding: 3px; border: 1px solid #DFE1E0;}
			@font-face
			{
				font-family: 'Noto Sans Bengali';
				src: url(NotoSansBengali-Regular.woff), url('NotoSansBengali-Regular.ttf'), url(NotoSansBengali-Regular.ttf) format('truetype');
				font-weight: 400;
			}
			body{
				color:#333;
				font-size:14px;
				font-family: tahoma, 'Noto Sans Bengali', 'Helvetica', 'Arial', sans-serif;
			}
		</style>	
		<script type="text/javascript" src="http://bangla-keyboard-layout.googlecode.com/svn/trunk/rokeya_layout-4.4.731.js"></script>
	</head>
	<body onload="document.getElementById('checkItOut').focus();">

		<div style="text-align: left;">
		<h2>নিচের টেক্সট-এরিয়া তে বাংলা লিখুন</h2>
		<textarea style="width: 100%; height: 300px;font-family: 'Noto Sans Bengali', tahoma, 'Helvetica', 'Arial', sans-serif;" onfocus="" id="checkItOut" name="checkItOut"></textarea>
		<br/>
		
		<h2>সহায়ক তথ্যাবলী: </h2>
		<ul>
		<li><strong>কি-ম্যাপ:</strong> প্রায় সকল বর্ণই ফোনেটিক স্টাইলের ইংরেজী বর্ণমালায় পাওয়া যাবে</li>
		<li><strong>ব্যতিক্রম:</strong> হ=H, ঙ=x, ঞ=X, য়=y, ৎ=Z, ং=V, ঁ=B, ঃ=M, হসন্ত = q অথবা +, এবং য-ফলা = Y</li>
		<li><strong>যুক্তাক্ষর লেখার নিয়ম:</strong> প্রথম বর্ণ, এরপরে হসন্ত (q অথবা প্লাস [+]) এবং তারপর দ্বিতীয় বর্ণ। যেমন: ক্স = k + s, ক্ত = k q T, হ্ম = H + m, হ্ন = H + n, ল্ক = l q k
		<li><strong>র-ফলা টাইপ করার নিয়ম:</strong> "r(র) q(হসন্ত) বর্ণ" এই ক্রমে টাইপ করুন। যেমন: র্ণ = r q N</li>
		<li>h চেপে <strong>স্বরবরর্ণের পূর্ন-রূপ ও কার-রূপে সুইচ করুন</strong>। যেমন: b i= বি এবং b i h= বই</li>
		<li>কোন <strong>বর্ণের নিচে এককভাবে হসন্ত টাইপ</strong> করতে হসন্ত (q অথবা +) চেপে h চাপুন। যেমন: ক্‌ন = k q h n
		<li>কম্পিউটার থেকে বাংলা ও ইংরেজীতে সুইচ করতে ctrl+m অথবা F9 চাপুন</li>
		</ul>
		</div>
		<div style="text-align: center;">
			<br><br>
			©<a href='http://code.google.com/p/bangla-keyboard-layout/'>Rokeya Bangla Keyboard Layout</a> <br/>All Rights reserved. 
		</div>
<script type="text/javascript">
function initRokeyaLayout()
{
	new banglaLayout("checkItOut").loadHelpTooltip();
}


if(typeof Keyboard!='undefined')
	initRokeyaLayout();

else
{
	var fileref=document.createElement('script');
	fileref.setAttribute("type","text/javascript");
	fileref.setAttribute("src", "rokeya_layout-dev.js");
	
	if(typeof(fileref.addEventListener) != 'undefined') 
	{
		fileref.addEventListener('load',initRokeyaLayout,false);
	}
	else if(fileref.readyState)
	{
		fileref.onreadystatechange = function(){
			if (fileref.readyState == "loaded" || fileref.readyState == "complete")
			{
				fileref.onreadystatechange = null;
				initRokeyaLayout();
			}
		};
	}
	else
		alert('Unable to connect to internet and This browser is not supported to work offline');
		
	document.getElementsByTagName("head")[0].appendChild(fileref);
}
</script>

<script src="//cdn.jsdelivr.net/tinymce/4.1.2/tinymce.min.js"></script>
<script type="text/javascript">
tinymce.init({
    selector: "textarea",
    theme: "modern"
});
Keyboard.prototype.setCursorPosition = function(editor, index) {
        //get the content in the editor before we add the bookmark... 
        //use the format: html to strip out any existing meta tags
        var content = editor.getContent({format: "html"});

        //split the content at the given index
        var part1 = content.substr(0, index);
        var part2 = content.substr(index);

        //create a bookmark... bookmark is an object with the id of the bookmark
        var bookmark = editor.selection.getBookmark(0);

        //this is a meta span tag that looks like the one the bookmark added... just make sure the ID is the same
        var positionString = '<span id="'+bookmark.id+'_start" data-mce-type="bookmark" data-mce-style="overflow:hidden;line-height:0px"></span>';
        //cram the position string inbetween the two parts of the content we got earlier
        var contentWithString = part1 + positionString + part2;

        //replace the content of the editor with the content with the special span
        //use format: raw so that the bookmark meta tag will remain in the content
        editor.setContent(contentWithString, ({format: "raw"}));

        //move the cursor back to the bookmark
        //this will also strip out the bookmark metatag from the html
        editor.selection.moveToBookmark(bookmark);

        //return the bookmark just because
        return bookmark;
}
Keyboard.prototype.getCursorPosition = function(editor) {
        //set a bookmark so we can return to the current position after we reset the content later
        var bm = editor.selection.getBookmark(0);    

        //select the bookmark element
        var selector = "[data-mce-type=bookmark]";
        var bmElements = editor.dom.select(selector);

        //put the cursor in front of that element
        editor.selection.select(bmElements[0]);
        editor.selection.collapse();

        //add in my special span to get the index...
        //we won't be able to use the bookmark element for this because each browser will put id and class attributes in different orders.
        var elementID = Math.random();
        var positionString = '<span id="'+elementID+'"></span>';
        editor.selection.setContent(positionString);

        //get the content with the special span but without the bookmark meta tag
        var content = editor.getContent({format: "html"});
        //find the index of the span we placed earlier
        var index = content.indexOf(positionString);

        //remove my special span from the content
        editor.dom.remove(elementID, false);            

        //move back to the bookmark
        editor.selection.moveToBookmark(bm);

        return index;
}

window.onload = function () {
        tinymce.get('checkItOut').on('keydown',function(e){
		var editor = this;
		var keyboard = new Keyboard();
		var content = editor.getContent();
		var cursorIndex = keyboard.getCursorPosition(editor);
			
		var newText = keyboard.plugin(this.getContent(), cursorIndex, e);
		if(newText != true){
		
		editor.setContent(newText.text);
		//editor.execCommand('insertHTML',false, newText.text);
		keyboard.setCursorPosition(editor, newText.caret);	
		
		// prevent insertion of typed character
        e.preventDefault();
        e.stopPropagation();
        return false;
}
        });
    }
</script>

	
</body></html>